# Style Guide: Проект "Нейросотрудник"

Этот документ определяет стиль кода, конвенции именования и архитектурные принципы, используемые в проекте. Цель — поддерживать кодовую базу чистой, последовательной и понятной, даже если она разрабатывается с помощью AI.

## 1. Стиль Кода Python

-   **Основа**: Весь код должен соответствовать стандарту **PEP 8**. Это основной стандарт форматирования для Python, который обеспечивает читаемость.
-   **Именование переменных и функций**: Используется стиль `snake_case` (все буквы в нижнем регистре, слова разделены подчеркиванием).
    -   *Пример: `user_profile`, `send_vk_message()`.*
-   **Именование констант**: Используется стиль `UPPER_SNAKE_CASE` (все буквы в верхнем регистре, слова разделены подчеркиванием). Константы объявляются в начале файла.
    -   *Пример: `VK_API_TOKEN`, `DATABASE_URL`.*
-   **Именование классов**: Используется стиль `CamelCase` (слова пишутся слитно, каждое с большой буквы).
    -   *Пример: `class ReminderService:`.*

## 2. Комментарии и Документация

-   **Докстринги (Docstrings)**: Каждая важная функция или класс должны иметь докстринг (`"""..."""`), кратко описывающий ее назначение, принимаемые аргументы (`Args:`) и возвращаемое значение (`Returns:`), если они есть.
-   **Комментарии**: Строчные комментарии (`# ...`) используются для объяснения сложных или неочевидных участков кода. Не нужно комментировать очевидные вещи.

## 3. Правила Работы с Базой Данных (PostgreSQL)

-   **Именование таблиц**: Используется стиль `snake_case` во множественном числе.
    -   *Пример: `user_profiles`, `dialog_histories`.*
-   **Именование полей**: Используется стиль `snake_case`.
    -   *Пример: `conv_id`, `last_message_time`, `full_name`.*
-   **Ключ связи (CRITICAL)**: **Все таблицы**, содержащие данные, относящиеся к конкретному пользователю, **обязаны иметь поле `conv_id`**. Это основной идентификатор для связи данных по всему проекту.

## 4. Стиль Git-коммитов

Для обеспечения читаемой истории изменений все коммиты, создаваемые AI-ассистентом, должны следовать стандарту **Conventional Commits**.

-   **`feat:`**: Добавление новой функции (например, `feat: add content agent logic`).
-   **`fix:`**: Исправление ошибки (например, `fix: correct timezone calculation in reminders`).
-   **`docs:`**: Изменения, касающиеся только документации (например, `docs: update projectbrief.md`).
-   **`style:`**: Изменения, не влияющие на логику, только на форматирование кода.
-   **`refactor:`**: Рефакторинг кода без изменения его поведения.
-   **`chore:`**: Прочие изменения, не затрагивающие код (обновление зависимостей, настройка CI/CD).

## 5. Общие Принципы

-   **Простота превыше всего**: Предпочитаем простой и понятный код сложным абстракциям.
-   **Одна функция — одна задача**: Стараемся, чтобы каждая функция выполняла одно логическое действие.
-   **Конфигурация через окружение**: Никаких "магических" строк или токенов в коде. Вся конфигурация загружается из переменных окружения. 