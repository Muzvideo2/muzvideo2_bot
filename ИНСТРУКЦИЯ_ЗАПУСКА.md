# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£ –ê–ù–ê–õ–ò–ó–ê–¢–û–†–ê –í–õ–û–ñ–ï–ù–ò–ô

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –í–ò–î–ï–û**:

### üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞:
- **üì∏ –§–æ—Ç–æ/—Å—Ç–∏–∫–µ—Ä—ã**: –ü–æ–ª–Ω–æ–µ OCR –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (—á–µ–∫–∏, –æ—à–∏–±–∫–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- **üé§ –ì–æ–ª–æ—Å–æ–≤—ã–µ**: –ü–æ–ª–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ä–µ—á–∏ –≤ —Ç–µ–∫—Å—Ç
- **üé• –í–ò–î–ï–û**: 
  - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 2 –º–∏–Ω—É—Ç –≤–∏–¥–µ–æ
  - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ—Ä—è–¥–∞ —á–µ—Ä–µ–∑ Gemini 2.5
  - –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ä–µ—á–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å —ç–∫—Ä–∞–Ω–∞
  - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
- **üìù –†–µ–ø–æ—Å—Ç—ã**: –ê–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- **üéµ –ú—É–∑—ã–∫–∞**: –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–∑–∏—Ü–∏–π

### ü§ñ –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –±–æ—Ç–∞:
- –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `bot_context.json` —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –≤–ª–æ–∂–µ–Ω–∏–π
- –ü–æ–º–æ–≥–∞–µ—Ç –±–æ—Ç—É –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Å—Ç–∏–∫–µ—Ä "–ü—Ä–∏–≤–µ—Ç" ‚Üí "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?")

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Ñ–∞–π–ª—ã:
# - downloaded_attachments/ (–ø–∞–ø–∫–∞ —Å–æ —Å–∫–∞—á–∞–Ω–Ω—ã–º–∏ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏)
# - –≤–∞—à-–∫–ª—é—á-vertex-ai.json (JSON —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏ Google Cloud)
# - .env —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ VK
```

### –®–∞–≥ 2: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–ª—é—á–µ–π Vertex AI
–ü–æ–º–µ—Å—Ç–∏—Ç–µ JSON —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏ –≤ –ø–∞–ø–∫—É —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º. –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–æ–≤–æ "key" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏:
- ‚úÖ `my-project-key.json`
- ‚úÖ `vertex-ai-key.json` 
- ‚úÖ `google-cloud-key.json`

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
```bash
python attachment_analyzer.py
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### –§–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ø–∞–ø–∫–µ `analysis_results/`:

1. **`final_analysis_report.json`** - –ü–æ–ª–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç
2. **`human_readable_report.md`** - –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–π –æ—Ç—á–µ—Ç  
3. **`bot_context.json`** - üÜï –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –±–æ—Ç–∞
4. **`analysis_*.json`** - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É

### –ù–æ–≤—ã–π —Ñ–∞–π–ª bot_context.json —Å–æ–¥–µ—Ä–∂–∏—Ç:
```json
{
  "attachment_insights": {
    "photo": ["–û–±–Ω–∞—Ä—É–∂–µ–Ω —á–µ–∫ - –±–æ—Ç –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Å —É—á–µ—Ç–æ–º —Ä–∞—Å—Ö–æ–¥–æ–≤"],
    "video": ["–í–∏–¥–µ–æ —Å –æ–±—É—á–∞—é—â–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º"],
    "audio_message": ["–ì–æ–ª–æ—Å–æ–≤–æ–µ –æ –º—É–∑—ã–∫–µ/–æ–±—É—á–µ–Ω–∏–∏"]
  },
  "quick_responses": {
    "photo": ["–í–∏–∂—É —á–µ–∫! –ú–æ–≥—É –ø–æ–º–æ—á—å —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ç—Ä–∞—Ç"],
    "video": ["–û—Ç–ª–∏—á–Ω–æ–µ –≤–∏–¥–µ–æ! –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ?"],
    "sticker": ["–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"]
  }
}
```

## üé• –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ:
- –°–∫–∞—á–∏–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ **2 –º–∏–Ω—É—Ç—ã** –≤–∏–¥–µ–æ –≤ –Ω–∞–∏–ª—É—á—à–µ–º –∫–∞—á–µ—Å—Ç–≤–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ffmpeg –¥–ª—è –æ–±—Ä–µ–∑–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ `.mp4` —Ñ–∞–π–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Gemini:
1. **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫—Ç–æ —É—á–∞—Å—Ç–≤—É–µ—Ç, –æ —á–µ–º –≥–æ–≤–æ—Ä—è—Ç
2. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ**: –û–±—Å—Ç–∞–Ω–æ–≤–∫–∞, –æ–±—ä–µ–∫—Ç—ã, –¥–µ–π—Å—Ç–≤–∏—è
3. **–ê—É–¥–∏–æ**: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ä–µ—á–∏ –∏ –∑–≤—É–∫–æ–≤
4. **–¢–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ –≤–∏–¥–∏–º–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –¢–µ–º–∞, –∂–∞–Ω—Ä, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤–∏–¥–µ–æ

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
- **Python 3.8+**
- **ffmpeg** (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ) - —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚úÖ

### Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
```bash
pip install -r requirements.txt
```

–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `google-cloud-aiplatform` - Vertex AI
- `vk_api` - VK API
- `requests` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `python-dotenv` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud

1. **–í–∫–ª—é—á–∏—Ç–µ Vertex AI API** –≤ Google Cloud Console
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∏–ª–ª–∏–Ω–≥** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
3. **–°–æ–∑–¥–∞–π—Ç–µ Service Account** —Å —Ä–æ–ª—å—é "Vertex AI User"
4. **–°–∫–∞—á–∞–π—Ç–µ JSON –∫–ª—é—á–∏** –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ —Ä—è–¥–æ–º —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ):
- **–§–æ—Ç–æ**: 2-5 —Å–µ–∫—É–Ω–¥
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ**: 3-8 —Å–µ–∫—É–Ω–¥  
- **–í–∏–¥–µ–æ**: 30-120 —Å–µ–∫—É–Ω–¥ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞)
- **–°—Ç–∏–∫–µ—Ä—ã**: 2-4 —Å–µ–∫—É–Ω–¥—ã
- **–†–µ–ø–æ—Å—Ç—ã/–º—É–∑—ã–∫–∞**: 1-2 —Å–µ–∫—É–Ω–¥—ã

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- **–í–∏–¥–µ–æ**: –ú–∞–∫—Å–∏–º—É–º 2 –º–∏–Ω—É—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –î–æ 20MB –Ω–∞ —Ñ–∞–π–ª
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –Ω–∞–∏–ª—É—á—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ ffmpeg:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
ffmpeg -version
```

### –û—à–∏–±–∫–∞ Vertex AI:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–ª–ª–∏–Ω–≥ –≤ Google Cloud
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ Service Account

### –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –í–æ–∑–º–æ–∂–Ω–æ, –≤–∏–¥–µ–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–æ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `attachment_analysis.log` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

---
**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç —Å–º–æ–∂–µ—Ç "–≤–∏–¥–µ—Ç—å" –∏ –ø–æ–Ω–∏–º–∞—Ç—å –≤—Å–µ —Ç–∏–ø—ã –≤–ª–æ–∂–µ–Ω–∏–π! üéâ** 