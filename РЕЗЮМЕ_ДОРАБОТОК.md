# –†–ï–ó–Æ–ú–ï –î–û–†–ê–ë–û–¢–û–ö –ê–ù–ê–õ–ò–ó–ê–¢–û–†–ê –í–õ–û–ñ–ï–ù–ò–ô

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
**–ó–ê–ú–ï–ù–ê –ê–ù–ê–õ–ò–ó–ê –ü–û–õ–ù–û–ì–û –í–ò–î–ï–û –ù–ê –ê–ù–ê–õ–ò–ó –ü–†–ï–í–¨–Æ-–ö–ê–î–†–û–í**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–∏—à–µ–ª –∫ –≤—ã–≤–æ–¥—É, —á—Ç–æ –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä–æ–≤ —á–µ—Ä–µ–∑ Gemini –¥–∞–µ—Ç **–Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ —ç—Ç–æ–≥–æ –ë–û–õ–ï–ï —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**. 

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ attachment_analyzer.py

### ‚ùå –£–î–ê–õ–ï–ù–û (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥):
1. **–ú–µ—Ç–æ–¥ `download_and_trim_video()`** - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ –¥–æ 2 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ ffmpeg
2. **–ú–µ—Ç–æ–¥ `analyze_video_content()`** - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ Gemini
3. **–ú–µ—Ç–æ–¥ `get_video_url_via_api()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ URL –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ VK API
4. **–ò–º–ø–æ—Ä—Ç `subprocess`** - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω –±–µ–∑ ffmpeg
5. **–ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –≤–∏–¥–µ–æ** - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–∞–¥—Ä–æ–≤

### ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥):
1. **–ú–µ—Ç–æ–¥ `download_frame()`** - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤ –≤–∏–¥–µ–æ
2. **–ú–µ—Ç–æ–¥ `analyze_frame_with_gemini()`** - –∞–Ω–∞–ª–∏–∑ –∫–∞–¥—Ä–æ–≤ —á–µ—Ä–µ–∑ Gemini —Å —É–º–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏
3. **–ú–µ—Ç–æ–¥ `analyze_video_frames()`** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ—Ö –∫–∞–¥—Ä–æ–≤ –≤–∏–¥–µ–æ
4. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ frames/** - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∫–∞—á–∞–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤
5. **–£–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** - —Ä–∞–∑–Ω—ã–µ –¥–ª—è –æ–±–ª–æ–∂–∫–∏ –∏ –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä–æ–≤

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
- **3 —Ñ–æ—Ç–æ** - –ø–æ–ª–Ω—ã–π OCR –∞–Ω–∞–ª–∏–∑ (100%)
- **2 –≤–∏–¥–µ–æ** - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä–æ–≤ (66.7%)
  - 8 –∫–∞–¥—Ä–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ (–ø–æ 4 –∫–∞–¥—Ä–∞ –Ω–∞ –≤–∏–¥–µ–æ)
  - –û–±–ª–æ–∂–∫–∞ + 3 –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ
- **1 –≤–∏–¥–µ–æ** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ "–≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ" (33.3%)
- **3 –≥–æ–ª–æ—Å–æ–≤—ã—Ö** - –ø–æ–ª–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (100%)
- **3 —Ä–µ–ø–æ—Å—Ç–∞** - –∞–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (100%)
- **3 –º—É–∑—ã–∫–∏** - –∞–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (100%)

### üé¨ –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä–æ–≤ –¥–∞–µ—Ç:
1. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** - —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–∞–¥—Ä–µ
2. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã** - –æ–±—ä–µ–∫—Ç—ã, –ª—é–¥–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∞
3. **–¢–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ –≤–∏–¥–∏–º–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–∏–¥–µ–æ** - —Ç–µ–º–∞, –∂–∞–Ω—Ä, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
5. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –Ω–∞—á–∞–ª–∞ –∫ –∫–æ–Ω—Ü—É –≤–∏–¥–µ–æ

## ü§ñ –°–æ–∑–¥–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –±–æ—Ç–∞

### –£–º–Ω—ã–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã:
- **–§–æ—Ç–æ —Å —á–µ–∫–∞–º–∏**: "–í–∏–∂—É —á–µ–∫! –ú–æ–≥—É –ø–æ–º–æ—á—å —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ç—Ä–∞—Ç –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ–∫—É–ø–æ–∫."
- **–û–±—É—á–∞—é—â–∏–µ –≤–∏–¥–µ–æ**: "–û—Ç–ª–∏—á–Ω–æ–µ –≤–∏–¥–µ–æ! –í–∏–∂—É, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –æ–±—É—á–µ–Ω–∏–µ–º. –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –∏–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—É?"
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: "–ü—Ä–æ—Å–ª—É—à–∞–ª –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### ‚úÖ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≥–æ—Ç–æ–≤:
1. **–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** - —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–ª –≤—Å–µ —Ç–∏–ø—ã –≤–ª–æ–∂–µ–Ω–∏–π
2. **–ß–µ—Å—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Ä–∞–∑–ª–∏—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
3. **–°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç** - —Ñ–∞–π–ª `bot_context.json` –¥–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ JSON —Ñ–∞–π–ª—ã + –∫–∞–¥—Ä—ã –≤–∏–¥–µ–æ

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
```
analysis_results/
‚îú‚îÄ‚îÄ frames/                              # –°–∫–∞—á–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ first_frame_78671089-456239944.jpg
‚îÇ   ‚îú‚îÄ‚îÄ preview_1_78671089-456239944.jpg
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ analysis_video_3.json.json          # –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ bot_context.json                     # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
‚îî‚îÄ‚îÄ final_analysis_report.json          # –û–±—â–∏–π –æ—Ç—á–µ—Ç
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–°–∫–æ—Ä–æ—Å—Ç—å** - –∞–Ω–∞–ª–∏–∑ –∫–∞–¥—Ä–æ–≤ –≤ 10+ —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ –ø–æ–ª–Ω–æ–≥–æ –≤–∏–¥–µ–æ
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ URL –≤–∏–¥–µ–æ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
3. **–ö–∞—á–µ—Å—Ç–≤–æ** - Gemini –¥–∞–µ—Ç –æ—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–∞–∂–µ –ø–æ –∫–∞–¥—Ä–∞–º
4. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
5. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –≤–∏–¥–µ–æ VK (–µ—Å—Ç—å –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä—ã)

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.py** - –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

---

**–í–´–í–û–î:** –ó–∞–º–µ–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª–Ω–æ–≥–æ –≤–∏–¥–µ–æ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–≤—å—é-–∫–∞–¥—Ä–æ–≤ **–£–°–ü–ï–®–ù–û –í–´–ü–û–õ–ù–ï–ù–ê**. –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∫–∞–∑–∞–ª –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. 